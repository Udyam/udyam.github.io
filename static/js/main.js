jQuery(document).ready(function($){var gallery=$('.cd-gallery'),foldingPanel=$('.cd-folding-panel'),mainContent=$('.cd-main');gallery.on('click','a',function(event){event.preventDefault();openItemInfo($(this).attr('href'));});foldingPanel.on('click','.cd-close',function(event){event.preventDefault();toggleContent('',false);});gallery.on('click',function(event){if($(event.target).is('.cd-gallery')&&$('.fold-is-open').length>0)toggleContent('',false);})
function openItemInfo(url){var mq=viewportSize();if(gallery.offset().top>$(window).scrollTop()&&mq!='mobile'){$('body,html').animate({'scrollTop':gallery.offset().top},100,function(){toggleContent(url,true);});}else if(gallery.offset().top+ gallery.height()<$(window).scrollTop()+ $(window).height()&&mq!='mobile'){$('body,html').animate({'scrollTop':gallery.offset().top+ gallery.height()- $(window).height()},100,function(){toggleContent(url,true);});}else{toggleContent(url,true);}}
function toggleContent(url,bool){if(bool){var foldingContent=foldingPanel.find('.cd-fold-content');foldingContent.load(url+' .cd-fold-content > *',function(event){setTimeout(function(){$('body').addClass('overflow-hidden');foldingPanel.addClass('is-open');mainContent.addClass('fold-is-open');},100);});}else{var mq=viewportSize();foldingPanel.removeClass('is-open');mainContent.removeClass('fold-is-open');(mq=='mobile'||$('.no-csstransitions').length>0)?$('body').removeClass('overflow-hidden'):mainContent.find('.cd-item').eq(0).one('webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend',function(){$('body').removeClass('overflow-hidden');mainContent.find('.cd-item').eq(0).off('webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend');});}}
function viewportSize(){return window.getComputedStyle(document.querySelector('.cd-main'),'::before').getPropertyValue('content').replace(/"/g,"").replace(/'/g,"");}});